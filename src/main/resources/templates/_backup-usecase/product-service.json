{
    "technology-spec": "spring-boot",
    "application-components": {
        "basePackage": "com.aadityadesigners.ecart",
        "entity": [
            {
                "name": "Product",
                "table": "PRODUCT",
                "attributes": [
                    {
                        "name": "id",
                        "type": "Long"
                    },
                    {
                        "name": "name",
                        "type": "String"
                    },
                    {
                        "name": "sku",
                        "type": "String"
                    },
                    {
                        "name": "inventory",
                        "type": "Inventory",
                        "mappingType": "One to One"
                    },
                    {
                        "name": "orderItem",
                        "type": "OrderItem",
                        "mappingType": "One to One"
                    },
                    {
                        "name": "price",
                        "type": "Float"
                    }
                ]
            },
            {
                "name": "Inventory",
                "table": "INVENTORY",
                "attributes": [
                    {
                        "name": "id",
                        "type": "Long"
                    },
                    {
                        "name": "stock",
                        "type": "Integer"
                    },
                    {
                        "name": "product",
                        "type": "Product",
                        "mappingType": "One to One"
                    }
                ]
            },
            {
                "name": "OrderItem",
                "table": "ORDER_ITEM",
                "attributes": [
                    {
                        "name": "id",
                        "type": "Long"
                    },
                    {
                        "name": "productQuantity",
                        "type": "Integer"
                    },
                    {
                        "name": "product",
                        "type": "Product",
                        "mappingType": "One to One"
                    },
                    {
                        "name": "order",
                        "type": "Order",
                        "mappingType": "Many to One"
                    }
                ]
            },
            {
                "name": "Order",
                "table": "ORDER",
                "attributes": [
                    {
                        "name": "id",
                        "type": "Long"
                    },
                    {
                        "name": "orderItems",
                        "type": "List<OrderItem>",
                        "mappingType": "One to Many"
                    },
                    {
                        "name": "totalOrderAmount",
                        "type": "Integer"
                    }
                ]
            }
        ],
        "service": [
            {
                "name": "ecartService",
                "function": [
                    {
                        "name": "checkProductStock",
                        "processing-logic": "For a given Product see if the stock is greater than zero in the corresponding 'Inventory' entity. If yes, return TRUE else return FALSE."
                    },
                    {
                        "name": "createOrderItem",
                        "processing-logic": "Now create a new OrderItem by supplying the Product quantity."
                    },
                    {
                        "name": "updateInventoryStock",
                        "processing-logic": "Now, subtract the stock of the Inventory as per the OrderItem's Product quantity."
                    },
                    {
                        "name": "createOrder",
                        "processing-logic": "Finally create new Order for the list of OrderItems."
                    },
                    {
                        "name": "computeOrderTotal",
                        "processing-logic": "Loop through OrderItems and multiply the productQuantity with the Product's price. Finally sum it up to calculate the totalAmount of the Order."
                    }                    
                ]
            }
        ],
        "controller": [
            {
                "name": "ecartController",
                "function": [
                    {
                        "name": "checkProductStock"
                    },
                    {
                        "name": "createOrderItem"
                    },
                    {
                        "name": "updateInventoryStock"
                    },
                    {
                        "name": "createOrder"
                    },
                    {
                        "name": "computeOrderTotal"
                    }
                ]
            }
        ]
    }
}